// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`renders correcly 1`] = `
"<!-- Generated by solve-dynamo-spec.js. Update this documentation by updating the spec-v1.json file. -->

# Solve API DynamoDB Spec

Documentation for the DynamoDB table

## Table of Contents

-   [Table Spec](#table-spec)
-   [Access Patterns](#access-patterns)
    -   [Get user profile info](#get-user-profile-info)
    -   [Get user available episodes](#get-user-available-episodes)
-   [Indexes](#indexes)
    -   [Main](#main)
-   [Map Attributes](#map-attributes)

## Table Spec

<details>

<summary>Params to create the table using the CLI or the AWS SDK:</summary>

\`\`\`json
{
  \\"AttributeDefinitions\\": [
    {
      \\"AttributeName\\": \\"pk\\",
      \\"AttributeType\\": \\"S\\"
    },
    {
      \\"AttributeName\\": \\"sk\\",
      \\"AttributeType\\": \\"S\\"
    }
  ],
  \\"TableName\\": \\"solveless-api\\",
  \\"KeySchema\\": [
    {
      \\"AttributeName\\": \\"pk\\",
      \\"KeyType\\": \\"HASH\\"
    },
    {
      \\"AttributeName\\": \\"sk\\",
      \\"KeyType\\": \\"RANGE\\"
    }
  ],
  \\"ProvisionedThroughput\\": {
    \\"ReadCapacityUnits\\": 5,
    \\"WriteCapacityUnits\\": 5
  },
  \\"BillingMode\\": \\"PAY_PER_REQUEST\\"
}
\`\`\`

</details>

\`createTable\` Using the CLI:

\`\`\`bash
$ aws dynamodb create-table --table-name solveless-api --cli-input-json create-table.json
\`\`\`

Using the AWS SDK:

\`\`\`javascript
const DynamoDB = require(\\"aws-sdk/clients/dynamodb\\");

const service = new DynamoDB({ region: process.env.AWS_REGION });

service.createTable(tableJson, (err, data) => {
  console.log(data);
});

\`\`\`

## Access Patterns

### Get user profile info

Perform a [Get](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB/DocumentClient.html#get-property \\"Get\\") against the Main index: 

\`\`\`json
{
  \\"TableName\\": \\"solveless-api\\",
  \\"Key\\": {
    \\"pk\\": \\"user-6549\\",
    \\"sk\\": \\"metadata:user-6549\\"
  }
}
\`\`\`

#### Matching Records

| pk        | sk                 | currentPoints | winCount | playedCount | profile                                  |
| --------- | ------------------ | ------------- | -------- | ----------- | ---------------------------------------- |
| user-6549 | metadata:user-6549 | 87            | 54       | 65          | [profile map](#profile-object \\"profile\\") |

### Get user available episodes

Perform a [Query](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB/DocumentClient.html#query-property \\"Query\\") against the Main index with a \`#sk = :sk\` condition on the sort key with filter conditions:

\`\`\`json
{
  \\"TableName\\": \\"solveless-api\\",
  \\"KeyConditionExpression\\": \\"#pk = :pk and #sk = :sk\\",
  \\"ExpressionAttributeNames\\": {
    \\"#pk\\": \\"pk\\",
    \\"#sk\\": \\"sk\\",
    \\"#releaseDate\\": \\"releaseDate\\",
    \\"#status\\": \\"status\\",
    \\"#title\\": \\"title\\"
  },
  \\"ExpressionAttributeValues\\": {
    \\":pk\\": \\"user-6549\\",
    \\":sk\\": \\"episode:available\\",
    \\":releaseDate\\": \\"01-12-2019\\",
    \\":status0\\": \\"READY\\",
    \\":status1\\": \\"PUBLISHED\\",
    \\":title\\": 3
  },
  \\"FilterExpression\\": \\"#releaseDate <= :releaseDate AND #status IN (:status0, :status1) AND size(#title) >= :title\\"
}
\`\`\`

#### Matching Records

| pk        | sk                | releaseDate | status | title             |
| --------- | ----------------- | ----------- | ------ | ----------------- |
| user-6549 | episode:available | 01-01-2019  | READY  | The Mafia Problem |

## Indexes

### Main

| pk (HASH) | sk (RANGE)         |                             |                   |                              |                                         |
| --------- | ------------------ | --------------------------- | ----------------- | ---------------------------- | --------------------------------------- |
| user-6549 | metadata:user-6549 | **currentPoints:** 87       | **winCount:** 54  | **playedCount:** 65          | **profile:** \`{\\"avatar\\":\\"https://... }\` |
| user-6549 | episode:available  | **releaseDate:** 01-01-2019 | **status:** READY | **title:** The Mafia Problem |                                         |

## Map Attributes
"
`;
